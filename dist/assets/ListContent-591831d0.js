import{r as D,b as S,o as a,d as q,w as z,e as E,f as y,u as l,i as R,t as h,g as c,h as V,c as o,a as L,j as g,F as w,k as x,n as C,l as j,m as F,p as I,q as N}from"./index-799c92c4.js";const O={alt:"",class:"list-content__img"},U={class:"list-content__name"},A={__name:"ListItem",props:{item:Object,title:String},setup(s){return(m,d)=>{const _=D("router-link"),i=S("lazy");return a(),q(_,{to:`/${s.title}/${s.item.id}`,class:"list-content__item"},{default:z(()=>[E(y("img",O,null,512),[[i,l(R)+s.item.poster_path]]),y("h3",U,h(s.item.title||s.item.name),1)]),_:1},8,["to"])}}},G={class:"pagin__menu"},H=["onClick"],J=["onClick"],K=["onClick"],B={__name:"Pagination",props:{top:{type:Boolean,default:!1},currentPage:{type:Number,default:1},totalPages:Number},emits:["emitPage"],setup(s,{emit:m}){const d=s;let _=c(null),i=c(null),u=c(null),v=c(null),k=c(null),P=c(null),p=c(null);function f(t){let e=d.totalPages;_.value=t>1?t-1:null,i.value=e>t?t+1:null,u.value=t-3>1?t-3:null,v.value=t+3<e?t+3:null,k.value=u.value?[1,2]:t==4?[1,2,3,4,5]:[1,2,3,4],P.value=v.value?[e--,e].reverse():e-3==t?[e--,e--,e--,e--,e].reverse():[e--,e--,e--,e].reverse(),p.value=v.value&&u.value?[t-1,t,t+1]:null}f(d.currentPage);function r(t){f(t),m("emitPage",t)}return V(()=>d.totalPages,()=>{f(d.currentPage)}),(t,e)=>{const $=D("font-awesome-icon");return a(),o("div",{class:C(["pagin",{pagin_top:s.top}])},[y("ul",G,[l(_)?(a(),o("li",{key:0,class:"pagin__btn",onClick:e[0]||(e[0]=n=>r(l(_)))},[L($,{icon:["fas","chevron-left"]})])):g("",!0),l(k)?(a(!0),o(w,{key:1},x(l(k),n=>(a(),o("li",{class:C(["pagin__num",{active:n==s.currentPage}]),key:n,onClick:b=>r(n)},h(n),11,H))),128)):g("",!0),l(u)?(a(),o("li",{key:2,class:"pagin__num",onClick:e[1]||(e[1]=n=>r(l(u)))}," ... ")):g("",!0),l(p)?(a(!0),o(w,{key:3},x(l(p),n=>(a(),o("li",{class:C(["pagin__num",{active:n==s.currentPage}]),key:n,onClick:b=>r(n)},h(n),11,J))),128)):g("",!0),l(v)?(a(),o("li",{key:4,class:"pagin__num",onClick:e[2]||(e[2]=n=>r(l(v)))}," ... ")):g("",!0),l(P)?(a(!0),o(w,{key:5},x(l(P),n=>(a(),o("li",{class:C(["pagin__num",{active:n==s.currentPage}]),key:n,onClick:b=>r(n)},h(n),11,K))),128)):g("",!0),l(i)?(a(),o("li",{key:6,class:"pagin__btn",onClick:e[3]||(e[3]=n=>r(l(i)))},[L($,{icon:["fas","chevron-right"]})])):g("",!0)])],2)}}},M={class:"container list-content"},Q={class:"list-content__title"},T={key:0,class:"loading loading_relative"},W=y("div",{class:"loading__spiner"},null,-1),X=[W],Y={class:"list-content__wrapper"},ee={__name:"ListContent",props:{type:String},setup(s){const m=s,d=j(),_=F(),i=I();let u=c(1);i.getPopular(m.type,u.value);const v=N(()=>i.maxPages),k=N(()=>_.query.page?+_.query.page:1);console.log(k);let P=c(!1);const p=c([]);async function f(t=1){P.value=!0,u.value=t,await i.getPopular(m.type,u.value);let e=m.type=="movie"?i.moviesList:i.tvsList;p.value=e,P.value=!1}function r(t){d.push({path:`/${m.type}`,query:{page:t}}),f(t)}return r(k.value),(t,e)=>(a(),o("section",M,[y("h2",Q,h(s.type=="movie"?"Все фильмы":"Все сериалы"),1),L(B,{top:!0,currentPage:l(u),onEmitPage:r,totalPages:v.value},null,8,["currentPage","totalPages"]),l(P)?(a(),o("div",T,X)):g("",!0),y("div",Y,[(a(!0),o(w,null,x(p.value,($,n)=>(a(),q(A,{key:n,item:$,title:s.type},null,8,["item","title"]))),128))]),L(B,{currentPage:l(u),onEmitPage:r,totalPages:v.value},null,8,["currentPage","totalPages"])]))}};export{ee as _};
